{
  "app": {
    "name": "otedama",
    "env": "production",
    "port": 3000,
    "host": "0.0.0.0",
    "cluster": {
      "enabled": true,
      "workers": "auto"
    },
    "ssl": {
      "enabled": true,
      "cert": "/etc/ssl/certs/otedama.crt",
      "key": "/etc/ssl/private/otedama.key",
      "ca": "/etc/ssl/certs/ca-bundle.crt"
    }
  },
  "database": {
    "host": "localhost",
    "port": 5432,
    "database": "otedama_prod",
    "username": "otedama",
    "password": "${DB_PASSWORD}",
    "ssl": {
      "rejectUnauthorized": false,
      "require": true
    },
    "pool": {
      "min": 20,
      "max": 200,
      "idleTimeoutMillis": 30000,
      "connectionTimeoutMillis": 2000,
      "statementTimeout": 30000
    },
    "replication": {
      "enabled": true,
      "readReplicas": [
        {
          "host": "db-replica-1.otedama.local",
          "port": 5432
        },
        {
          "host": "db-replica-2.otedama.local",
          "port": 5432
        }
      ]
    }
  },
  "redis": {
    "sentinels": [
      {
        "host": "redis-sentinel-1.otedama.local",
        "port": 26379
      },
      {
        "host": "redis-sentinel-2.otedama.local",
        "port": 26379
      },
      {
        "host": "redis-sentinel-3.otedama.local",
        "port": 26379
      }
    ],
    "name": "mymaster",
    "password": "${REDIS_PASSWORD}",
    "db": 0,
    "sentinelPassword": "${REDIS_SENTINEL_PASSWORD}"
  },
  "security": {
    "cors": {
      "origin": ["https://app.otedama.local", "https://www.otedama.local"],
      "credentials": true
    },
    "rateLimit": {
      "enabled": true,
      "windowMs": 60000,
      "max": 1000,
      "standardHeaders": true,
      "legacyHeaders": false
    },
    "firewall": {
      "enabled": true,
      "trustedProxies": ["127.0.0.1", "10.0.0.0/8"],
      "whitelist": [],
      "blacklist": []
    },
    "jwt": {
      "secret": "${JWT_SECRET}",
      "expiresIn": "24h",
      "refreshExpiresIn": "7d"
    }
  },
  "storage": {
    "type": "local",
    "basePath": "/var/lib/otedama",
    "uploads": "/var/lib/otedama/uploads",
    "temp": "/var/lib/otedama/temp",
    "backups": "/var/lib/otedama/backups",
    "nfs": {
      "enabled": true,
      "server": "nfs.otedama.local",
      "path": "/exports/otedama"
    }
  },
  "monitoring": {
    "prometheus": {
      "enabled": true,
      "port": 9090,
      "path": "/metrics",
      "defaultLabels": {
        "environment": "production",
        "region": "self-hosted"
      }
    },
    "grafana": {
      "enabled": true,
      "url": "http://grafana.otedama.local:3000",
      "dashboards": {
        "system": "dashboard/system",
        "application": "dashboard/application",
        "business": "dashboard/business"
      }
    },
    "elk": {
      "enabled": true,
      "elasticsearch": "http://elasticsearch.otedama.local:9200",
      "logstash": "logstash.otedama.local:5044",
      "kibana": "http://kibana.otedama.local:5601"
    }
  },
  "loadBalancer": {
    "type": "haproxy",
    "config": "/etc/haproxy/haproxy.cfg",
    "stats": {
      "enabled": true,
      "uri": "/haproxy?stats",
      "realm": "HAProxy Statistics",
      "auth": "admin:${HAPROXY_STATS_PASSWORD}"
    },
    "backends": [
      {
        "name": "web-backend",
        "servers": [
          "web1.otedama.local:3000",
          "web2.otedama.local:3000",
          "web3.otedama.local:3000"
        ],
        "balance": "roundrobin",
        "options": ["httpchk GET /health"]
      },
      {
        "name": "api-backend",
        "servers": [
          "api1.otedama.local:3001",
          "api2.otedama.local:3001",
          "api3.otedama.local:3001"
        ],
        "balance": "leastconn",
        "options": ["httpchk GET /api/health"]
      }
    ]
  },
  "backup": {
    "enabled": true,
    "schedule": {
      "database": "0 2 * * *",
      "files": "0 3 * * *",
      "configs": "0 4 * * *"
    },
    "retention": {
      "daily": 7,
      "weekly": 4,
      "monthly": 6,
      "yearly": 2
    },
    "destinations": [
      {
        "type": "local",
        "path": "/backup/otedama"
      },
      {
        "type": "rsync",
        "host": "backup.otedama.local",
        "path": "/backups/otedama"
      },
      {
        "type": "s3",
        "endpoint": "http://minio.otedama.local:9000",
        "bucket": "otedama-backups",
        "accessKey": "${MINIO_ACCESS_KEY}",
        "secretKey": "${MINIO_SECRET_KEY}"
      }
    ]
  },
  "logging": {
    "level": "info",
    "outputs": [
      {
        "type": "file",
        "path": "/var/log/otedama/app.log",
        "maxSize": "100m",
        "maxFiles": 10,
        "compress": true
      },
      {
        "type": "syslog",
        "host": "syslog.otedama.local",
        "port": 514,
        "protocol": "udp4",
        "facility": "local0"
      }
    ],
    "format": "json",
    "sensitiveFields": ["password", "apiKey", "secret", "token"]
  },
  "features": {
    "mining": {
      "enabled": true,
      "algorithms": ["SHA256", "Scrypt", "Ethash", "RandomX", "KawPow"],
      "stratum": {
        "ports": {
          "SHA256": 3333,
          "Scrypt": 3334,
          "Ethash": 3335,
          "RandomX": 3336,
          "KawPow": 3337
        },
        "difficulty": {
          "default": 16384,
          "min": 64,
          "max": 4294967296
        }
      }
    },
    "trading": {
      "enabled": true,
      "maintenanceMode": false,
      "engine": {
        "matchingInterval": 100,
        "orderBookDepth": 1000,
        "maxOrdersPerUser": 100
      }
    },
    "defi": {
      "enabled": true,
      "contracts": {
        "staking": "0x...",
        "lending": "0x...",
        "liquidity": "0x...",
        "governance": "0x..."
      }
    }
  },
  "maintenance": {
    "autoVacuum": {
      "enabled": true,
      "schedule": "0 4 * * 0"
    },
    "logRotation": {
      "enabled": true,
      "maxAge": 30,
      "compress": true
    },
    "tempCleanup": {
      "enabled": true,
      "schedule": "0 5 * * *",
      "maxAge": 86400
    }
  },
  "clustering": {
    "enabled": true,
    "discovery": {
      "type": "consul",
      "consul": {
        "host": "consul.otedama.local",
        "port": 8500,
        "serviceName": "otedama-cluster"
      }
    },
    "communication": {
      "port": 7946,
      "encryption": true,
      "key": "${CLUSTER_ENCRYPTION_KEY}"
    }
  }
}