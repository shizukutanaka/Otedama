# Otedama Configuration
# Professional P2P Mining Pool & Mining Software

# Application Settings
app:
  name: "Otedama"
  mode: "production"  # development, staging, production
  log_level: "info"   # debug, info, warn, error
  debug: false

# Mining Configuration
mining:
  algorithm: "sha256d"  # sha256d, ethash, randomx, scrypt, kawpow
  enable_cpu: true
  enable_gpu: true
  enable_asic: true
  
  # CPU Mining Settings
  cpu:
    threads: 0          # 0 = auto-detect
    priority: "normal"  # low, normal, high
    affinity: true      # Enable CPU affinity
    
  # GPU Mining Settings
  gpu:
    devices: []         # Empty = auto-detect all GPUs
    intensity: 20       # 1-25, higher = more resources
    temperature_limit: 85
    power_limit: 0      # 0 = no limit (watts)
    
  # ASIC Mining Settings
  asic:
    devices: []         # Empty = auto-discover
    poll_interval: 5s
    reconnect_delay: 10s

# P2P Pool Configuration
pool:
  enable: true
  address: "0.0.0.0:3333"
  max_connections: 10000
  fee_percentage: 1.0
  
  # Reward System
  rewards:
    system: "PPLNS"      # PPS, PPLNS, PROP
    window: 2h
    minimum_payout: 0.001
    payout_interval: 24h
    
  # Backup Pools
  backup_pools:
    - url: "stratum+tcp://backup1.pool.com:3333"
      user: "wallet.worker"
      password: "x"
    - url: "stratum+tcp://backup2.pool.com:3333"
      user: "wallet.worker"
      password: "x"

# Stratum Protocol
stratum:
  enable: true
  address: "0.0.0.0:3333"
  max_workers: 10000
  difficulty:
    initial: 8192
    retarget_interval: 60s
    variance_percent: 30
  extra_nonce_size: 4
  
# P2P Network Configuration
p2p:
  enable: true
  port: 9333
  max_peers: 100
  bootstrap_nodes:
    - "node1.otedama.network:9333"
    - "node2.otedama.network:9333"
  discovery:
    enable: true
    interval: 30s
  sync:
    enable: true
    batch_size: 1000

# API Configuration
api:
  enable: true
  address: "0.0.0.0:8080"
  cors:
    enabled: true
    origins: ["*"]
  auth:
    enabled: true
    jwt_secret: "change-this-secret-key-in-production"
    token_expiry: 24h
  rate_limit:
    enabled: true
    requests_per_minute: 100

# Monitoring & Metrics
monitoring:
  metrics:
    enabled: true
    address: "0.0.0.0:9090"
    namespace: "otedama"
  health:
    enabled: true
    address: "0.0.0.0:8081"
    check_interval: 10s
  alerts:
    enabled: false
    webhook_url: ""

# Security Configuration
security:
  enable_tls: false
  cert_file: "/path/to/cert.pem"
  key_file: "/path/to/key.pem"
  ddos_protection:
    enabled: true
    max_requests_per_ip: 1000
    ban_duration: 1h
  encryption:
    enabled: true
    algorithm: "AES-256-GCM"

# Database Configuration
database:
  driver: "sqlite"  # sqlite, mysql, postgresql
  connection_string: "./data/otedama.db"
  max_connections: 100
  max_idle_connections: 10
  connection_max_lifetime: 1h

# Storage Configuration
storage:
  data_dir: "./data"
  cache:
    enabled: true
    size: 1GB
    ttl: 1h
  backup:
    enabled: true
    interval: 24h
    retention: 7d

# Performance Optimization
optimization:
  memory:
    max_usage: 4GB
    gc_interval: 5m
  cpu:
    turbo_mode: false
    power_saving: false
  network:
    buffer_size: 64KB
    keep_alive: true
    
# Advanced Features
features:
  auto_update: false
  telemetry: false
  profit_switching:
    enabled: false
    check_interval: 5m
    min_profit_increase: 10  # percent
  multi_currency:
    enabled: true
    currencies: ["BTC", "ETH", "LTC"]

# Logging Configuration
logging:
  level: "info"
  format: "json"  # text, json
  output: "stdout"  # stdout, file
  file:
    path: "./logs/otedama.log"
    max_size: 100MB
    max_backups: 7
    max_age: 30d
    compress: true

# Development Settings (only in development mode)
development:
  mock_mining: false
  test_net: false
  verbose_logging: false
  profiling:
    enabled: false
    port: 6060