# Otedama - Корпоративный P2P Майнинг Пул и Программное Обеспечение для Майнинга

**Версия**: 2.1.5  
**Лицензия**: MIT  
**Версия Go**: 1.21+  
**Архитектура**: Микросервисы с поддержкой P2P пула  
**Дата выпуска**: 6 августа 2025

Otedama - это корпоративный P2P майнинг пул и программное обеспечение для майнинга, разработанное для достижения максимальной эффективности и надежности. Построено в соответствии с принципами проектирования John Carmack (производительность), Robert C. Martin (чистая архитектура) и Rob Pike (простота), поддерживает комплексный майнинг CPU/GPU/ASIC с масштабируемостью национального уровня.

## Архитектура

### P2P Майнинг Пул
- **Распределенное управление пулом**: Распределенный майнинг пул с автоматическим переключением при сбоях
- **Распределение вознаграждений**: Продвинутые алгоритмы PPS/PPLNS с поддержкой множественных валют
- **Протокол федерации**: Межпульная связь для повышенной устойчивости
- **Мониторинг национального уровня**: Корпоративный мониторинг, подходящий для государственного развертывания

### Возможности Майнинга
- **Мульти-алгоритм**: SHA256d, Ethash, RandomX, Scrypt, KawPow
- **Универсальное оборудование**: Оптимизировано для CPU, GPU (CUDA/OpenCL), ASIC
- **Продвинутый Stratum**: Полная поддержка v1/v2 с расширениями для высокопроизводительных майнеров
- **Оптимизации без копирования**: Кэш-осведомленные структуры данных и NUMA-осведомленная память

### Корпоративные Функции
- **Готовность к производству**: Развертывание Docker/Kubernetes с автомасштабированием
- **Корпоративная безопасность**: DDoS защита, ограничение скорости, комплексный аудит
- **Высокая доступность**: Мульти-узловая настройка с автоматическим переключением при сбоях
- **Аналитика в реальном времени**: WebSocket API с интеграцией живых дашбордов

## Требования

- Go 1.21 или выше
- Linux, macOS, Windows
- Майнинг оборудование (CPU/GPU/ASIC)
- Сетевое подключение к майнинг пулу

## Установка

### Из исходного кода

```bash
# Сборка в директории исходного кода
cd Otedama

# Сборка бинарного файла
make build

# Установка в систему
make install
```

### Использование Go Build

```bash
go build ./cmd/otedama
```

### Docker Продакшн

```bash
# Продакшн развертывание
docker build -f Dockerfile.production -t otedama:production .
docker run -d --name otedama \
  -v ./config.yaml:/app/config/config.yaml:ro \
  -v otedama_data:/app/data \
  -p 3333:3333 -p 8080:8080 \
  otedama:production
```

### Kubernetes

```bash
# Развертывание полного стека
kubectl apply -f k8s/
```

## Быстрый Старт

### 1. Конфигурация

```yaml
# Продакшн конфигурация с поддержкой P2P пула
app:
  name: "Otedama"
  mode: "production"

mining:
  algorithm: "sha256d"
  enable_cpu: true
  enable_gpu: true
  enable_asic: true
  
  cpu:
    threads: 0 # Автоопределение
    priority: "normal"
  
  gpu:
    devices: [] # Автоопределение всех устройств
    intensity: 20
    temperature_limit: 85
  
  asic:
    devices: [] # Автообнаружение
    poll_interval: 5s

pool:
  enable: true
  address: "0.0.0.0:3333"
  max_connections: 10000
  fee_percentage: 1.0
  rewards:
    system: "PPLNS"
    window: 2h

api:
  enable: true
  address: "0.0.0.0:8080"
  auth:
    enabled: true
    token_expiry: 24h

monitoring:
  metrics:
    enabled: true
    address: "0.0.0.0:9090"
  health:
    enabled: true
    address: "0.0.0.0:8081"
```

### 2. Варианты развертывания

```bash
# Разработка
./otedama serve --config config.yaml

# Продакшн Docker
docker-compose -f docker-compose.production.yml up -d

# Корпоративный Kubernetes
kubectl apply -f k8s/

# Ручное продакшн развертывание
sudo ./scripts/production-deploy.sh
```

### 3. Мониторинг производительности

```bash
# Проверка статуса
./otedama status

# Просмотр логов
tail -f logs/otedama.log

# API эндпоинт
curl http://localhost:8080/api/status
```

## Производительность

Otedama оптимизирован для максимальной эффективности:

- **Использование памяти**: Оптимизировано для минимального использования памяти
- **Размер бинарного файла**: Компактный размер (~15MB)
- **Время запуска**: <500ms
- **Накладные расходы CPU**: <1% для мониторинга

## API Справочник

### REST Эндпоинты

- `GET /api/status` - Статус майнинга
- `GET /api/stats` - Подробная статистика
- `GET /api/workers` - Информация о воркерах
- `POST /api/mining/start` - Запуск майнинга
- `POST /api/mining/stop` - Остановка майнинга

### WebSocket

Подключение к `ws://localhost:8080/api/ws` для обновлений в реальном времени.

## Развертывание

### Docker Compose

```yaml
version: '3.8'
services:
  otedama:
    build: .
    volumes:
      - ./config.yaml:/config.yaml
    ports:
      - "8080:8080"
      - "3333:3333"
    restart: unless-stopped
```

### Kubernetes

```bash
kubectl apply -f k8s/
```

## Вклад

Вклады приветствуются! Пожалуйста, следуйте стандартным практикам разработки:

1. Создайте ветку функций
2. Внесите изменения
3. Тщательно протестируйте
4. Отправьте на рассмотрение

## Лицензия

Этот проект лицензирован под лицензией MIT - см. файл [LICENSE](LICENSE) для подробностей.

## Благодарности

- Разработчикам Bitcoin Core за протоколы майнинга
- Go сообществу за отличные библиотеки
- Всем участникам и пользователям Otedama

## Поддержка

- Проверьте документацию в директории `docs/`
- Просмотрите примеры конфигурации в `config.example.yaml`
- Обратитесь к API документации по адресу `/api/docs` при работе

## Пожертвования

Если вы находите Otedama полезным, пожалуйста, рассмотрите поддержку разработки:

**Bitcoin (BTC)**: `1GzHriuokSrZYAZEEWoL7eeCCXsX3WyLHa`

Ваша поддержка помогает поддерживать и улучшать Otedama!

---

**⚠️ Важно**: Майнинг криптовалют потребляет значительные вычислительные ресурсы и электроэнергию. Пожалуйста, поймите затраты и воздействие на окружающую среду перед началом майнинга.